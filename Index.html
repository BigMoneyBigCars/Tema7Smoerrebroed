<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>New Nordic Kitchen</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <nav>
            <section id="menu-sidebar">
                <div class="top-menu">
                    <div class="logoBillede">
                        <img src="" alt="">
                    </div>
                </div>
                <div class="middle-menu">
                    <ul>
                        <li><a href="index.html" class="">Forside</a></li>
                        <li><a class="filter" data-kategori="Kød">Kød</a></li>
                        <li><a class="filter" data-kategori="Fisk">Fisk</a></li>
                        <li><a class="filter" data-kategori="Vegetar">Vegetar</a></li>
                        <li><a class="filter" data-kategori="drikkevarer">Drikkevarer</a></li>
                    </ul>
                </div>
                <div class="bottom-menu">
                    <ul socials>
                        <li><a href="index.html">Om Os</a></li>
                        <li><a href="index.html">Kontakt</a> </li>
                    </ul>
                </div>
            </section>

            <section id="mobil-top-Menu">
                <div class="MenuMobilBox">
                    <div class="item flex">
                        <img src="Logo/loogogogogo.gif" alt="dd">
                    </div>
                    <div class="item flex">
                        <a href="kontakt.html">
                            <p>Om os</p>
                        </a>
                    </div>
                    <div id="forside" data-kategori="alle" class="item flex">
                        <a href="Index.html">
                            <p>Forside</p>
                        </a>
                    </div>
                    <div class="item flex ">
                        <div class="burgermenu " onclick="clickMenu(this)">
                            <div class="bar1"></div>
                            <div class="bar2"></div>
                            <div class="bar3"></div>
                        </div>
                    </div>
                </div>
                <section id="menuMobil" class="hidden">
                    <a href="index.html" class="active">Forside</a>
                    <a class="filter" data-kategori="Kød">Kød</a>
                    <a class="filter" data-kategori="Fisk">Fisk</a>
                    <a class="filter" data-kategori="Vegetar">Vegetar</a>
                    <a class="filter" data-kategori="drikkevarer">Drikkevarer</a>
                    <a href="index.html">Om Os</a>
                    <a href="index.html">Kontakt</a>
                </section>
            </section>
        </nav>
    </header>
    <!--/* Splash billede container */-->
    <section id="splash">
        <div class="container">
            <img class="mySlides" src="Splashbillede/splaaash.jpg" alt="sild">
            <img class="mySlides" src="Splashbillede/splaash.jpg" alt="blomstermad">
            <img class="mySlides" src="Splashbillede/splash.jpg" alt="makrel">
            <h1 id="overskrift"></h1>
            <p id="paragraphtxt"></p>
        </div>
    </section>
    <!--/* mad-kategori containere */-->
    <section id="kategori-container">
        <article id="koed" class="filter koedbillede Billede  " data-kategori="Kød">
            <h1></h1>
            <p></p>
        </article>
        <article id="fisk" class="filter fiskbillede Billede " data-kategori="Fisk">
            <h1></h1>
            <p></p>
        </article>
        <article id="vegetar" class="filter vegetarbillede Billede " data-kategori="Vegetar">
            <h1></h1>
            <p></p>
        </article>
        <article id="drikkevarer" class="filter drikkevarerbillede Billede " data-kategori="drikkevarer">
            <h1></h1>
            <p></p>
        </article>
    </section>
    <main>
        <!--/* pop up vindue  */-->
        <div id="popUp">
            <button class="luk">X</button>
            <div class="lukPopUp">
                <section class="indhold">
                    <article class="enkeltRet">
                        <img class="billede" src="" alt="">
                        <h2></h2>
                        <p class="pris"></p>
                        <p class="kort"></p>
                    </article>
                </section>
            </div>
        </div>
        <!--/* data-container og articles der bliver printet i JS ud fra googlesheet. */-->
        <section class="data-container"></section>
        <template>
            <article>
                <img src="" alt="">
                <h2></h2>
                <p class="pris"></p>
                <p class="kort"></p>
            </article>
        </template>
    </main>
    <script>
        // Splash billede MySlides function der skifter billede efter tid. //
        var slideIndex = 0;

        carousel();

        function carousel() {
            var i;
            var x = document.getElementsByClassName("mySlides");
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }
            slideIndex++;
            if (slideIndex > x.length) {
                slideIndex = 1
            }
            x[slideIndex - 1].style.display = "block";
            setTimeout(carousel, 5000); // Change image every 5 seconds
        }

        // er i tvivl om den bruges??
        function clickMenu(luk) {
            luk.classList.toggle("change");
        }

        // erklæring af variabler, sætter konstante variabler til at være lig containere, loader Json på DOMload.
        let retter;

        let kategori = "alle";

        const container = document.querySelector(".data-container");

        const temp = document.querySelector("template");

        const article = document.querySelector(".enkeltperson");

        document.addEventListener("DOMContentLoaded", getJson);


        //  Erklærer JsonData til vores google sheeet, sætter eventlisterningers på burgermenu og forside knap, og på mad-kategori billederne på forsiden.
        async function getJson() {

            let jsonData = await fetch("https://spreadsheets.google.com/feeds/list/1cefgRhGLAPtoKEFyd5789ovjTWE4wHkzxEAenmD291M/od6/public/values?alt=json");
            console.log("jsonData", jsonData);

            retter = await jsonData.json();

            console.log("retter", retter);

            document.querySelector(".burgermenu").addEventListener("click", toggleMenu);

            document.querySelector("#forside").addEventListener("click", menuForside);

            addEventListenerToButtons();
        };

        //Forside knap der viser alle mad kategorier og fjerner data-container/de filterede mad kategorier fra forsiden

        function menuForside() {
            document.getElementById("koed").style.display = "block";
            document.getElementById("vegetar").style.display = "block";
            document.getElementById("fisk").style.display = "block";
            document.getElementById("drikkevarer").style.display = "block";
            document.getElementById("splash").style.display = "block";
            document.querySelector(".data-container").style.display = "none";

        }

        // kalder filtrering på alle divs med classens "filter"

        function addEventListenerToButtons() {
            document.querySelectorAll(".filter").forEach(elm => {
                elm.addEventListener("click", filtrering);
            })
        }

        //Functionen der kloner alle articles som hentes fra google sheetet.

        function visRetter() {
            document.querySelector(".data-container").style.display = "block";
            container.innerHTML = "";
            retter.feed.entry.forEach((ret) => {
                if (kategori == "alle" || kategori == ret.gsx$kategori.$t) {
                    const klon = temp.cloneNode(true).content;
                    klon.querySelector("h2").textContent = ret.gsx$navn.$t;
                    klon.querySelector("img").src = `billede/${ret.gsx$billede.$t}.png`;
                    klon.querySelector("img").alt = ret.gsx$billede.$t;
                    klon.querySelector(".pris").textContent = `Pris: ${ret.gsx$pris.$t}.- `;
                    klon.querySelector(".kort").textContent = ret.gsx$kort.$t;

                    // skjuler forside mad-kategorierne når der trykkes ind i kategorierne. Lavet på den her måde, så alt vises på én index.html side, istedet for at have flere html'er.
                    document.getElementById("koed").style.display = "none";
                    document.getElementById("vegetar").style.display = "none";
                    document.getElementById("fisk").style.display = "none";
                    document.getElementById("drikkevarer").style.display = "none";
                    document.getElementById("splash").style.display = "none";


                    container.appendChild(klon);
                    container.lastElementChild.addEventListener("click", () => {
                        visSingle(ret)


                    });
                }
            })
        }

        // tror denne her function er ligegyldig, da den er duplikeret og ligger længere oppe i koden.
        function addEventListenerToButtons() {

            console.log("hekkkke");
            document.querySelectorAll(".filter").forEach(elm => {
                elm.addEventListener("click", filtrering);
            })
        }

        // filtrering der snakker til data-kategorierne og kalder visRetter.
        function filtrering() {
            console.log(filtrering);
            kategori = this.dataset.kategori;
            document.querySelectorAll("button").forEach(knap => {
                knap.classList.remove("valgt")
            })
            this.classList.add("valgt");

            visRetter();
        }

        // Function der laver popup siden, og ligger eventlisterners på selve div'en og tilbage knappen.
        function visSingle(ret) {
            document.querySelector("#popUp").style.display = "block";
            document.querySelector("#popUp .luk").addEventListener("click", lukSingle);
            document.querySelector("#popUp .lukPopUp").addEventListener("click", lukSingle);

            document.querySelector(".enkeltRet h2").textContent = ret.gsx$navn.$t;
            document.querySelector(".enkeltRet .billede").src = `billede/${ret.gsx$billede.$t}.png`;
            document.querySelector(".enkeltRet .billede").alt = ret.gsx$navn.$t;
            document.querySelector(".pris").textContent = `Pris: ${ret.gsx$pris.$t}.- `;
            document.querySelector(".kort").textContent = ret.gsx$kort.$t;
        }
        // Lukker popUp vinduet.
        function lukSingle() {
            document.querySelector("#popUp").style.display = "none";
        }


        //Mobil burgermmenu //

        // toggler classen hidden, som er display:none, menuen i mobil.
        function toggleMenu() {
            console.log("toggleMenu");
            document.querySelector("#menuMobil").classList.toggle("hidden");

            let erSkjult = document.querySelector("#menuMobil").classList.contains("hidden");

            /* if (erSkjult == true) {
                 document.getElementById("menuknapMobil").src = "Icons/Menu.svg";
             } else {

                 document.getElementById("menuknapMobil").src = "icons/No.svg";

             }*/
        }

        // tekst på forside mad-kategorierne
        document.querySelector("#koed h1").textContent = "Kød";
        document.querySelector("#fisk h1").textContent = "fisk";
        document.querySelector("#vegetar h1").textContent = "vegetar";
        document.querySelector("#drikkevarer h1").textContent = "drikkevarer";
        // overskrift på splash billede //
        // ALTID BRUG textContent men fordi her
        // har vi brug for et line break <br>
        // så derfor skal paragraphen opfattes som html element//

        //tekst på splashbillede / MySlides
        document.getElementById("overskrift").innerHTML = "Højbelagt smørrebrød";
        document.getElementById("paragraphtxt").innerHTML = "Elsker du også smørrebrød? Om du er til de gode gamle klassikere, <br> eller gerne vil have et valg? - om du kun er til det grønne, eller hvis <br>du bare har lyst til lidt af det hele!";

    </script>

</body>

</html>
